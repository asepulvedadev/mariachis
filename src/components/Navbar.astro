---
// Navbar.astro
---

<header class="fixed w-full z-50 transition-all duration-300" id="navbar">
  <div class="container mx-auto">
    <nav class="flex items-center justify-between py-4">
      <!-- Logo -->
      <a href="/" class="flex items-center space-x-2">
        <span
          class="text-2xl md:text-3xl font-display font-bold text-mariachi-primary"
        >
          Mariachi <span class="text-mariachi-accent">Alma de México</span>
        </span>
      </a>

      <!-- Mobile Menu Button -->
      <button
        id="mobile-menu-button"
        class="md:hidden text-mariachi-dark focus:outline-none"
      >
        <i class="fas fa-bars text-2xl"></i>
      </button>

      <!-- Desktop Navigation -->
      <ul class="hidden md:flex items-center space-x-8">
        <li><a href="#inicio" class="nav-link">Inicio</a></li>
        <li><a href="#nosotros" class="nav-link">Nosotros</a></li>
        <li><a href="#servicios" class="nav-link">Servicios</a></li>
        <li><a href="#repertorio" class="nav-link">Repertorio</a></li>
        <li><a href="#galeria" class="nav-link">Galería</a></li>
        <li><a href="#testimonios" class="nav-link">Testimonios</a></li>
        <li><a href="#contacto" class="btn-primary">Contáctanos</a></li>
      </ul>
    </nav>

    <!-- Mobile Navigation -->
    <div
      id="mobile-menu"
      class="hidden md:hidden bg-white shadow-lg rounded-lg mt-2 py-4 px-6 absolute right-4 left-4 z-50 transition-all duration-300"
    >
      <ul class="flex flex-col space-y-4">
        <li><a href="#inicio" class="mobile-nav-link">Inicio</a></li>
        <li><a href="#nosotros" class="mobile-nav-link">Nosotros</a></li>
        <li><a href="#servicios" class="mobile-nav-link">Servicios</a></li>
        <li><a href="#repertorio" class="mobile-nav-link">Repertorio</a></li>
        <li><a href="#galeria" class="mobile-nav-link">Galería</a></li>
        <li><a href="#testimonios" class="mobile-nav-link">Testimonios</a></li>
        <li>
          <a href="#contacto" class="btn-primary w-full text-center"
            >Contáctanos</a>
        </li>
      </ul>
    </div>
  </div>
</header>

<style>
  .nav-link {
    @apply font-medium text-mariachi-dark hover:text-mariachi-primary transition-colors duration-300 relative;
  }

  .nav-link::after {
    content: "";
    @apply absolute left-0 bottom-[-5px] h-[2px] w-0 bg-mariachi-primary transition-all duration-300;
  }

  .nav-link:hover::after {
    @apply w-full;
  }

  .mobile-nav-link {
    @apply block font-medium text-mariachi-dark hover:text-mariachi-primary transition-colors duration-300;
  }

  #navbar.scrolled {
    @apply bg-white shadow-md;
  }
</style>

<script>
  // Toggle mobile menu
  const mobileMenuButton = document.getElementById("mobile-menu-button");
  const mobileMenu = document.getElementById("mobile-menu");

  mobileMenuButton?.addEventListener("click", () => {
    mobileMenu?.classList.toggle("hidden");

    // Change icon
    const icon = mobileMenuButton.querySelector("i");
    if (icon) {
      if (icon.classList.contains("fa-bars")) {
        icon.classList.remove("fa-bars");
        icon.classList.add("fa-times");
      } else {
        icon.classList.remove("fa-times");
        icon.classList.add("fa-bars");
      }
    }
  });

  // Close mobile menu when clicking on a link
  const mobileLinks = document.querySelectorAll(
    ".mobile-nav-link, #mobile-menu .btn-primary"
  );
  mobileLinks.forEach((link) => {
    link.addEventListener("click", () => {
      mobileMenu?.classList.add("hidden");
      const icon = mobileMenuButton?.querySelector("i");
      if (icon) {
        icon.classList.remove("fa-times");
        icon.classList.add("fa-bars");
      }
    });
  });

  // Add background to navbar on scroll
  const navbar = document.getElementById("navbar");
  window.addEventListener("scroll", () => {
    if (window.scrollY > 50) {
      navbar?.classList.add("scrolled");
    } else {
      navbar?.classList.remove("scrolled");
    }
  });
</script>

